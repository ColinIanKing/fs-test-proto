#
# Based on http://www.slideshare.net/markwkm/filesystem-performance-from-a-database-perspective
#
[seq-read]
rw=read
directory=${DIRECTORY}
size=${SIZE}
#
# Fixed runtime of 5 minutes
#
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=1
nrfiles=1
ioengine=libaio
time_based
exec_prerun=echo 3 > /proc/sys/vm/drop_caches
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job1
write_lat_log=job1
write_iops_log=job1

[seq-write]
rw=write
directory=${DIRECTORY}
size=${SIZE}
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=1
nrfiles=1
ioengine=libaio
time_based
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job2
write_lat_log=job2
write_iops_log=job2

[random-read]
rw=randread
directory=${DIRECTORY}
size=1G
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=8
nrfiles=1
ioengine=libaio
time_based
thinktime=100000
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job3
write_lat_log=job3
write_iops_log=job3

[random-write]
rw=randwrite
directory=${DIRECTORY}
size=1G
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=8
nrfiles=1
ioengine=libaio
time_based
thinktime=20000
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job4
write_lat_log=job4
write_iops_log=job4

[read-write-fast]
rw=rw
rwmixread=80
directory=${DIRECTORY}
size=1G
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=8
nrfiles=1
ioengine=libaio
time_based
thinktime=10000
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job5
write_lat_log=job5
write_iops_log=job5

[read-write-slow]
rw=rw
rwmixread=80
directory=${DIRECTORY}
size=1G
runtime=300
fadvise_hint=0
blocksize=8k
direct=1
numjobs=8
nrfiles=1
ioengine=libaio
time_based
thinktime=500000
thinktime_blocks=4
thinktime_spin=10
log_avg_msec=${LOG_AVG_MSEC}
write_bw_log=job5
write_lat_log=job5
write_iops_log=job5
